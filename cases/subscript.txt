string a = "test";
string f() { return a; }

// get
char c = a[1];
Assert_AreEqual('e', c);

// set
a[2] = 'x';
Assert_AreEqual("text", a);

// get + op
int index = getint();
Assert_AreEqual('u', a[index]+1);

// compound
c = a[3] += 2;
Assert_AreEqual('w', c);
Assert_AreEqual("texw", a);

// pre op
c = --a[0];
Assert_AreEqual('s', c);
Assert_AreEqual("sexw", a);

// post op
c = a[3]++;
Assert_AreEqual('w', c);
Assert_AreEqual("sexx", a);

// get from function
c = f()[0];
Assert_AreEqual('s', a);

// set from function
c = f()[1] = 'k';
Assert_AreEqual('k', c);
Assert_AreEqual("sekx", a);

// compound from function
c = f()[2] -= 3;
Assert_AreEqual('h', c);
Assert_AreEqual("sehx", a);

// pre op from function
c = --f()[0];
Assert_AreEqual('r', c);
Assert_AreEqual("rehx", a);

// post op from function
c = f()[0]--;
Assert_AreEqual('r', c);
Assert_AreEqual("qehx", a);
